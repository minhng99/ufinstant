=~=~=~=~=~=~=~=~=~=~=~= PuTTY log 2021.04.03 23:40:39 =~=~=~=~=~=~=~=~=~=~=~=

RTL9601C
PRELOADER Bismarck 3.5
II: SVN:5077c, Build_date:19110109, Toolkit:rsdk-1.5.6-5281-EB-2.6.30-0.9.30.3-131105
II: Disable OCP Timeout Monitor
II: Disable LX Timeout Monitor
II: Enable Triple Synchronizer
II:cg_cpu_clk_init doneII:cg_spif_clk_init doneII: CPU 112MHz (450/4/0), MEM 400MHz, LX 200MHz, SPIF 25MHz
II: NOR SPI-F... C22018/MMIO16-1/ModeC done
AK: DRAM AUTO CALIBRATION
AK: ZQ Calibration PassedAK: ZQ Calibration PassedAK: ZQ Calibration PassedAK: ZQ Calibration PassedAK: MR0: 0x00100b62
AK: MR1: 0x00110040
AK: MR2: 0x00120000
AK: MR3: 0x00130000
AK: clear dwdqor
AK: bit:00, max_w_s(00), max_w_len(17), max_r_s(00), max_r_len(31):  (0xb8001510)=0x51e0f00
AK: bit:01, max_w_s(00), max_w_len(17), max_r_s(00), max_r_len(31):  (0xb8001514)=0x51e0f00
AK: bit:02, max_w_s(00), max_w_len(17), max_r_s(00), max_r_len(31):  (0xb8001518)=0x51e0f00
AK: bit:03, max_w_s(00), max_w_len(17), max_r_s(00), max_r_len(31):  (0xb800151c)=0x51e0f00
AK: bit:04, max_w_s(00), max_w_len(19), max_r_s(00), max_r_len(31):  (0xb8001520)=0x61e0f00
AK: bit:05, max_w_s(00), max_w_len(17), max_r_s(00), max_r_len(31):  (0xb8001524)=0x51e0f00
AK: bit:06, max_w_s(00), max_w_len(19), max_r_s(00), max_r_len(31):  (0xb8001528)=0x61e0f00
AK: bit:07, max_w_s(00), max_w_len(17), max_r_s(00), max_r_len(31):  (0xb800152c)=0x51e0f00
AK: bit:08, max_w_s(00), max_w_len(17), max_r_s(00), max_r_len(31):  (0xb8001530)=0x51e0f00
AK: bit:09, max_w_s(00), max_w_len(19), max_r_s(00), max_r_len(31):  (0xb8001534)=0x61e0f00
AK: bit:10, max_w_s(00), max_w_len(17), max_r_s(00), max_r_len(31):  (0xb8001538)=0x51e0f00
AK: bit:11, max_w_s(00), max_w_len(19), max_r_s(00), max_r_len(31):  (0xb800153c)=0x61e0f00
AK: bit:12, max_w_s(00), max_w_len(19), max_r_s(00), max_r_len(31):  (0xb8001540)=0x61e0f00
AK: bit:13, max_w_s(00), max_w_len(17), max_r_s(00), max_r_len(31):  (0xb8001544)=0x51e0f00
AK: bit:14, max_w_s(00), max_w_len(19), max_r_s(00), max_r_len(31):  (0xb8001548)=0x61e0f00
AK: bit:15, max_w_s(00), max_w_len(17), max_r_s(00), max_r_len(31):  (0xb800154c)=0x51e0f00
AK: bit:16, max_w_s(00), max_w_len(17), max_r_s(00), max_r_len(31):  (0xb8001550)=0x1e0f00
AK: bit:17, max_w_s(00), max_w_len(17), max_r_s(00), max_r_len(31):  (0xb8001554)=0x1e0f00
AK: bit:18, max_w_s(00), max_w_len(17), max_r_s(00), max_r_len(29):  (0xb8001558)=0x1c0e00
AK: bit:19, max_w_s(00), max_w_len(17), max_r_s(00), max_r_len(29):  (0xb800155c)=0x1c0e00
AK: bit:20, max_w_s(00), max_w_len(19), max_r_s(00), max_r_len(31):  (0xb8001560)=0x1e0f00
AK: bit:21, max_w_s(00), max_w_len(17), max_r_s(00), max_r_len(31):  (0xb8001564)=0x1e0f00
AK: bit:22, max_w_s(00), max_w_len(19), max_r_s(00), max_r_len(29):  (0xb8001568)=0x1c0e00
AK: bit:23, max_w_s(00), max_w_len(19), max_r_s(00), max_r_len(29):  (0xb800156c)=0x1c0e00
AK: bit:24, max_w_s(00), max_w_len(17), max_r_s(00), max_r_len(31):  (0xb8001570)=0x1e0f00
AK: bit:25, max_w_s(00), max_w_len(19), max_r_s(00), max_r_len(31):  (0xb8001574)=0x1e0f00
AK: bit:26, max_w_s(00), max_w_len(17), max_r_s(00), max_r_len(31):  (0xb8001578)=0x1e0f00
AK: bit:27, max_w_s(00), max_w_len(19), max_r_s(00), max_r_len(31):  (0xb800157c)=0x1e0f00
AK: bit:28, max_w_s(00), max_w_len(19), max_r_s(00), max_r_len(31):  (0xb8001580)=0x1e0f00
AK: bit:29, max_w_s(00), max_w_len(17), max_r_s(00), max_r_len(31):  (0xb8001584)=0x1e0f00
AK: bit:30, max_w_s(00), max_w_len(19), max_r_s(00), max_r_len(31):  (0xb8001588)=0x1e0f00
AK: bit:31, max_w_s(00), max_w_len(17), max_r_s(00), max_r_len(31):  (0xb800158c)=0x1e0f00
AK: DQ enable delay sync with DQ delay tap.
    0xb80015D0=0x05050505, 0xb80015D4=0x05060506, 0xb80015D8=0x06050605, 0xb80015DC=0x05060506
AK: Disable read after write function
AK: dram auto calibrtaion is done
II: MEM_PROBE_OK
II: MEM_XLAT_OK
II: MEM_TO_REG_OK
II: MEM_CAL_OK
II: Change Stack from 0x9f007ff8 to 0x80efffe0
II: Decompressing U-Boot (0x81c00000 <- 0x9fc19a20)... (186 KB <- 71 KB) OK
II: Starting U-boot... 


U-Boot 2011.12.NA (Nov 01 2019 - 09:40:17) 359-b87

Board: RTL9601C / CPU:112MHz / LX:200MHx / MEM:400MHz / Type:DDR2

DRAM: 32 MB
SPI-F: C22018/MMIO16-1/ModeX 1x16 MB (plr_flash_info @ 81c2d9a8)
Loading 8192B env. variables from offset 0x40000
Loading 8192B env. variables from offset 0x42000
Loaded 8192B env. variables from offset 0x40000
Net:   LUNA GMAC 
Erasing SPI flash...Erasing 8192 B from 00042000... .100% ~ 00043fff/8192 B
Writing to SPI flash...Writing 8192 B from 81adbe78 to 00042000... ...............................................................100% ~ 00043fff/8192 B
Writing 1 B from 81adde80 to 00040004... 100% ~ 00040004/1 B
done
Valid environment: 2
Hit any key to stop autoboot:  0  0

9601C# 
9601C# help
?               - alias for 'help'
base            - print or set address offset
bdinfo          - print Board Info structure
boot            - boot default, i.e., run 'bootcmd'
bootd           - boot default, i.e., run 'bootcmd'
bootm           - boot application image from memory
bootp           - boot image via network using BOOTP/TFTP protocol
btg             - bus traffic generator sub-system
cmp             - memory compare
coninfo         - print console devices and information
cp              - memory copy
crc32           - checksum calculation
echo            - echo args to console
editenv         - edit environment variable
env             - environment handling commands
exit            - exit script
false           - do nothing, unsuccessfully
go              - start application at address 'addr'
help            - print command description/usage
iminfo          - print header information for application image
imxtract        - extract a part of a multi-image
itest           - return true/false on integer compare
loadb           - load binary file over serial line (kermit mode)
loads           - load S-Record file over serial line
loady           - load binary file over serial line (ymodem mode)
loop            - infinite loop on address range
md              - memory display
mdram_test      - mdram_test   - do DRAM test.
mflash_test     - mflash_test   - do flash test.
mm              - memory modify (auto-incrementing address)
mtest           - simple RAM read/write test
mw              - memory write (fill)
nm              - memory modify (constant address)
ping            - send ICMP ECHO_REQUEST to network host
printenv        - print environment variables
reset           - Perform RESET of the CPU
reset_all       - Perform whole chip RESET of the CPU
reset_sw        - Perform software RESET
run             - run commands in an environment variable
saveenv         - save environment variables to persistent storage
setenv          - set environment variables
sf              - SPI flash sub-system
showvar         - print local hushshell variables
sleep           - delay execution for some time
source          - run script from memory
test            - minimal test like /bin/sh
tftpboot        - boot image via network using TFTP protocol
tftpsrv         - act as a TFTP server and boot the first received file
true            - do nothing, successfully
upimgtar        - update kernel and rootfs by tar format on luna platform
upimgtarh       - update kernel and rootfs by UBNT format on luna platform
upvmimg         - update kernel and rootfs by vmimg format on luna platform
urescue         - start TFTP server and wait for firmware
version         - print monitor, compiler and linker version
xf              - xmodem to flash
9601C# printenv
b0=setenv bootargs ${bootargs_base} ${mtdparts0} ${rst2dfl_flg}; bootm ${img0_kernel}
b1=setenv bootargs ${bootargs_base} ${mtdparts1} ${rst2dfl_flg}; bootm ${img1_kernel}
baudrate=115200
boot_by_commit=if itest.s ${sw_commit} == 0;then run set_act0;run b0;else run set_act1;run b1;fi
boot_by_tryactive=if itest.s ${sw_tryactive} == 0;then setenv sw_tryactive 2;setenv sw_active 0;saveenv;run en_wdt;run b0;else setenv sw_tryactive 2;setenv sw_active 1;saveenv;run en_wdt;run b1;fi
bootargs_base=console=ttyS0,115200
bootcmd=if itest.s ${sw_tryactive} == 2; then run boot_by_commit;else run boot_by_tryactive;fi
bootcount=1
bootdelay=0
bootlimit=10
en_wdt=mw b8003268 e7c00000
erase_cfgfs=sf erase ${fl_cfgfs} +${fl_cfgfs_sz}
erase_env=sf erase ${fl_env} +${fl_env_sz};sf erase ${fl_env2} +${fl_env_sz}
ethact=LUNA GMAC 
ethaddr=18:E8:29:F5:DD:D1
fileaddr=80000000
filesize=31B038
fl_boot_sz=40000
fl_cfgfs=44000
fl_cfgfs_sz=3c000
fl_env=40000
fl_env2=42000
fl_env_sz=2000
fl_hw=fe0000
fl_hw_sz=10000
fl_kernel1=80000
fl_kernel1_sz=300000
fl_kernel2=830000
fl_kernel2_sz=300000
fl_rootfs1=380000
fl_rootfs1_sz=4b0000
fl_rootfs2=b30000
fl_rootfs2_sz=4b0000
fl_sec=ff0000
fl_sec_sz=10000
ftfp_base=80000000
fx1000_init=mw bb000084 00000048
img0_kernel=94080000
img1_kernel=94830000
ipaddr=192.168.1.20
mtdparts0=mtdparts=rtk_spi_nor_mtd:256K(boot),8K(env),8K(env2),240K(config),3M(k0)ro,4800K(r0)ro,3M(k1),4800K(r1),64K(hw),64K(sec),4K@0ro,4K@0ro,3M@512K(linux),4800K@3584K(rootfs) root=31:5
mtdparts1=mtdparts=rtk_spi_nor_mtd:256K(boot),8K(env),8K(env2),240K(config),3M(k0),4800K(r0),3M(k1)ro,4800K(r1)ro,64K(hw),64K(sec),4K@0ro,4K@0ro,3M@8384K(linux),4800K@11456K(rootfs) root=31:7
netmask=255.255.255.0
serverip=192.168.1.19
set_act0=if itest.s ${sw_active} != 0;then setenv sw_active 0;saveenv;fi
set_act1=if itest.s ${sw_active} != 1;then setenv sw_active 1;saveenv;fi
sgmii_init=mw bb000084 00000044
stderr=serial
stdin=serial
stdout=serial
sw_active=0
sw_commit=0
sw_crc0=67b567f2
sw_crc1=67b567f2
sw_tryactive=2
sw_valid0=1
sw_version0=v4.1.0.359-b87.191101.0940
sw_version1=v4.1.0.359-b87.191101.0940
upb=tftpboot ${ftfp_base} plr.img && crc32 ${fileaddr} ${filesize} && sf erase 0 +${fl_boot_sz} && sf write ${fileaddr} 0 ${filesize}
upgrade=tftpboot 80000000 UF-INSTANT.img && upimgtarh ${fileaddr} ${filesize}
upk=tftpboot ${ftfp_base} uImage && crc32 ${fileaddr} ${filesize} && sf erase ${fl_kernel1} +${fl_kernel1_sz} && sf write ${fileaddr} ${fl_kernel1} ${filesize}
upk1=tftpboot ${ftfp_base} uImage && crc32 ${fileaddr} ${filesize} && sf erase ${fl_kernel2} +${fl_kernel2_sz} && sf write ${fileaddr} ${fl_kernel2} ${filesize}
upr=tftpboot ${ftfp_base} rootfs && crc32 ${fileaddr} ${filesize} && sf erase ${fl_rootfs1} +${fl_rootfs1_sz} && sf write ${fileaddr} ${fl_rootfs1} ${filesize}
upr1=tftpboot ${ftfp_base} rootfs && crc32 ${fileaddr} ${filesize} && sf erase ${fl_rootfs2} +${fl_rootfs2_sz} && sf write ${fileaddr} ${fl_rootfs2} ${filesize}
upt=tftpboot 80000000 img.tar && upimgtar ${fileaddr} ${filesize}
upv=tftp 80000000 vm.img;upvmimg ${fileaddr}
yu=loady 80000000 && cp.b 80000000 81000000 ${filesize} && cmp.b 80000000 81000000 ${filesize} && sf erase 0 ${filesize} && sf write 80000000 0 ${filesize}

Environment size: 3364/8187 bytes
9601C# bdinfo
boot_params = 0x81ADDF10
memstart    = 0x80000000
memsize     = 0x02000000
flashstart  = 0xB4000000
flashsize   = 0x55555555
flashoffset = 0x00000000
ethaddr     = 18:E8:29:F5:DD:D1
ip_addr     = 192.168.1.20
baudrate    = 0 bps
9601C# 